#!/usr/bin/env sh

if [ -d "/usr/lib/jvm" ]; then
    JVM="/usr/lib/jvm/$(ls /usr/lib/jvm | grep -E "java-[0-9]+" | sort -V -r | head -n 1)"
    if [ $JVM != "/usr/lib/jvm/" ]; then
        JAVA_HOME=$JVM
    fi
fi

JAVACMD="${JAVA_HOME}/bin/java"
MODULE_PATH=/usr/share/java/symly/symly.jar:/usr/share/java/picocli/picocli.jar
MAIN_MODULE="org.symly/org.symly.cli.Main"

exec "$JAVACMD" \
    --module-path "$MODULE_PATH" \
    --module "${MAIN_MODULE}" \
    "$@"
